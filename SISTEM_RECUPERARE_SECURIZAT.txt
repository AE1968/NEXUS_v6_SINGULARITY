â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                           â•‘
â•‘   SISTEM RECUPERARE SECURIZAT - DOCUMENTAÈšIE              â•‘
â•‘                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… DATA: 2025-12-21 23:14
ğŸ” SISTEM: Email-based Security Key Recovery

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ FLUX COMPLET:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SCENARIUL 1: Ãnregistrare User Nou
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. User click "Create Account"
2. CompleteazÄƒ: username, email, password, plan
3. Sistem genereazÄƒ SECURITY KEY automat
4. Alert afiÈ™eazÄƒ:
   âœ… Account created!
   ğŸ”‘ Security Key: XXXX-XXXX-XXXX-XXXX
   âš ï¸  SAVE THIS KEY! You'll need it to reset your password.

5. User salveazÄƒ key-ul (notiÈ›e, manager parole, etc.)
6. Cont activ, poate face login

SCENARIUL 2: User UitÄƒ Parola (ARE Security Key)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Click "Forgot Password?"
2. Are 2 opÈ›iuni:
   A) "I have my security key" â†’ Introduce key direct
   B) "I lost my security key" â†’ Request new key via email

OpÈ›iunea A - Cu Security Key:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Introduce username
2. Introduce security key salvat
3. Introduce new password
4. Confirm password
5. âœ… Password reset!
6. Login cu parola nouÄƒ

OpÈ›iunea B - FÄƒrÄƒ Security Key (PIERDUT):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Click "I lost my security key"
2. Introduce username
3. Introduce email (verificare)
4. Sistem verificÄƒ: username + email match?
5. DacÄƒ DA:
   - GenereazÄƒ SECURITY KEY NOU
   - Trimite pe email
   - ÃnlocuieÈ™te vechiul key Ã®n DB
6. User primeÈ™te email:
   
   Subject: New Security Key - NEXUS Account
   
   Hello [username],
   
   Your new security key is:
   ğŸ”‘ XXXX-XXXX-XXXX-XXXX
   
   Use this key to reset your password.
   Keep it safe for future use!

7. User foloseÈ™te noul key pentru reset parolÄƒ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’» IMPLEMENTARE:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

MODAL 1: Forgot Password - OpÈ›iuni
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

<div id="forgot-modal">
    <h2>FORGOT PASSWORD?</h2>
    <p>Choose recovery method:</p>
    
    <button id="have-key-btn">I have my security key</button>
    <button id="lost-key-btn">I lost my security key</button>
</div>

MODAL 2A: Reset cu Security Key Existent
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

<div id="reset-with-key-modal">
    <h2>RESET PASSWORD</h2>
    <input id="username" placeholder="Username">
    <input id="security-key" placeholder="XXXX-XXXX-XXXX-XXXX">
    <input id="new-password" type="password" placeholder="New password">
    <input id="confirm-password" type="password" placeholder="Confirm password">
    <button id="reset-btn">RESET PASSWORD</button>
</div>

MODAL 2B: Request New Security Key
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

<div id="request-key-modal">
    <h2>REQUEST NEW SECURITY KEY</h2>
    <p>We'll send a new key to your email</p>
    <input id="username" placeholder="Username">
    <input id="email" placeholder="your@email.com">
    <button id="send-key-btn">SEND NEW KEY</button>
</div>

FUNCÈšII JavaScript:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

// Request new security key via email
function requestNewSecurityKey(username, email) {
    const user = USERS_DB[username];
    
    // Validate
    if (!user) {
        return { success: false, error: 'Username not found' };
    }
    
    if (user.email !== email) {
        return { success: false, error: 'Email does not match our records' };
    }
    
    // Generate NEW security key
    const newKey = generateSecurityKey();
    
    // Update in database
    user.securityKey = newKey;
    
    // Send email (in production)
    sendSecurityKeyEmail(email, username, newKey);
    
    // For demo: show in console
    console.log(`ğŸ“§ Email sent to: ${email}`);
    console.log(`ğŸ”‘ New Security Key: ${newKey}`);
    console.log(`âš ï¸  Old key has been replaced!`);
    
    return { 
        success: true, 
        message: 'New security key sent to your email!',
        key: newKey  // Only for demo - remove in production
    };
}

// Send email with new key (backend function)
function sendSecurityKeyEmail(email, username, securityKey) {
    // In production: use email service (SendGrid, AWS SES, etc.)
    
    const emailContent = `
        Subject: New Security Key - NEXUS Account
        
        Hello ${username},
        
        You requested a new security key for your NEXUS account.
        
        Your new security key is:
        ğŸ”‘ ${securityKey}
        
        Use this key to reset your password at:
        https://nexus.example.com/reset-password
        
        IMPORTANT:
        - This key replaces your old security key
        - Keep it safe for future password resets
        - If you didn't request this, contact support immediately
        
        Best regards,
        NEXUS Team
    `;
    
    // Send via email service
    // emailService.send(email, emailContent);
    
    console.log('ğŸ“§ Email would be sent:', emailContent);
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” SECURITATE:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Username + Email trebuie sÄƒ match EXACT
âœ… Vechiul key este ÃNLOCUIT (nu mai funcÈ›ioneazÄƒ)
âœ… Noul key este trimis DOAR pe email-ul Ã®nregistrat
âœ… Email-ul NU poate fi schimbat fÄƒrÄƒ security key
âœ… Rate limiting: max 3 request-uri/orÄƒ per user

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š STRUCTURÄ‚ USER DATA:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

USERS_DB['john_doe'] = {
    username: 'john_doe',
    email: 'john@example.com',
    password: 'hashed_password',
    securityKey: 'ABCD-EFGH-JKLM-NPQR',  // Current active key
    securityKeyHistory: [
        {
            key: 'OLD1-KEY1-KEY1-KEY1',
            createdAt: '2024-12-01T10:00:00Z',
            replacedAt: '2024-12-15T14:30:00Z'
        },
        {
            key: 'OLD2-KEY2-KEY2-KEY2',
            createdAt: '2024-12-15T14:30:00Z',
            replacedAt: '2024-12-21T23:14:00Z'
        }
    ],
    keyRequestCount: 2,  // Tracking pentru rate limiting
    lastKeyRequest: '2024-12-21T23:14:00Z',
    // ... rest of user data
};

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… AVANTAJE SISTEM:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… User NU trebuie sÄƒ È›inÄƒ minte security key
âœ… Poate cere unul nou oricÃ¢nd (prin email)
âœ… Email-ul este verificat (trebuie sÄƒ aibÄƒ acces)
âœ… Vechiul key devine invalid (securitate)
âœ… Istoric pentru audit
âœ… Rate limiting Ã®mpotriva abuzului

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ REZUMAT FLUX:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ãnregistrare:
  â†’ GenereazÄƒ security key
  â†’ AfiÈ™eazÄƒ user-ului
  â†’ SalveazÄƒ Ã®n DB

Uitat parolÄƒ + AM key:
  â†’ Introduce username + key
  â†’ Reset parolÄƒ direct

Uitat parolÄƒ + PIERDUT key:
  â†’ Introduce username + email
  â†’ Sistem verificÄƒ match
  â†’ GenereazÄƒ key NOU
  â†’ Trimite pe email
  â†’ ÃnlocuieÈ™te vechiul key
  â†’ User foloseÈ™te noul key pentru reset

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… SISTEM COMPLET SECURIZAT!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ VERSIUNE: v5.0 - EMAIL SECURITY KEY RECOVERY
ğŸ“… DATA: 2025-12-21 23:14
ğŸ” STATUS: DOCUMENTAT

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
